# Zookeeper

## 1. 核心功能

### 分布式锁

运用于分布式的Java业务系统中

 

### 元数据管理

Kafka、Canal，本身都是分布式架构，分布式集群在运行，本身他需要一个地方集中式的存储和管理分布式集群的核心元数据，所以他们都选择把核心元数据放在zookeeper中的

 

### 分布式协调

如果有人对zk中的数据做了变更，然后zk会反过来去通知其他监听这个数据的人，告诉别人这个数据变更了，kafka有多个broker，多个broker会竞争成为一个controller的角色。如果作为controller的broker挂掉了，此时他在zk里注册的一个节点会消失，其他broker瞬间会被zk反向通知这个事情，继续竞争成为新的controller。

这个就是非常经典的一个分布式协调的场景，有一个数据，一个broker注册了一个数据，其他broker监听这个数据

 

ZooKeeper，分布式协调系统，封装了分布式架构中所有核心和主流的需求和功能，**分布式锁、分布式集群的集中式元数据存储、Master选举、分布式协调和通知**



## 2. 使用场景

### 分布式Java业务系统

分布式电商平台，大部分的Java开发的互联网平台，或者是传统架构系统，都是分布式Java业务系统，Dubbo、Spring Cloud把系统拆分成很多的服务或者是子系统，大家协调工作，完成最终的功能。ZooKeeper，用的比较少，分布式锁的功能，而且很多人会选择用Redis分布式锁

 

### 开源的分布式系统 

Dubbo，HBase，HDFS，Kafka，Canal，Storm，Solr。**分布式集群的集中式元数据存储、Master选举实现HA架构、分布式协调和通知**

+ Dubbo：ZooKeeper作为注册中心，分布式集群的集中式元数据存储
+ HBase：分布式集群的集中式元数据存储
+ HDFS：Master选举实现HA架构
+ Kafka：分布式集群的集中式元数据存储，分布式协调和通知
+ Canal：分布式集群的集中式元数据存储，Master选举实现HA架构

 

### 自研的分布式系统

 HDFS，面向的超大文件，切割成一个一个的小块儿，分布式存储在一个大的集群里

分布式海量小文件系统：NameNode的HA架构，仿照HDFS的NameNode的HA架构，做主备两个NameNode，进行数据同步，然后自动基于zk进行热切换


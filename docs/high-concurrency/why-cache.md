
## 1. 为什么使用缓存
### 项目中缓存是如何使用的？
这个，需要结合自己项目的业务来。reference data 和 market data 读取

### 为什么要用缓存
用缓存，主要有两个用途：**高性能**、**高并发**。

#### 高性能
假设这么个场景，你有个操作，一个请求过来，耗时 600ms。但是这个结果可能接下来几个小时都不会变了，或者变了也可以不用立即反馈给用户。那么此时咋办？

缓存啊，折腾 600ms 查出来的结果，扔缓存里，一个 key 对应一个 value，下次再有人查，别走 mysql 折腾 600ms 了，直接从缓存里，通过一个 key 查出来一个 value，2ms 搞定。性能提升 300 倍。

就是说对于一些需要复杂操作耗时查出来的结果，且确定后面不怎么变化，但是有很多读请求，那么直接将查询出来的结果放在缓存中，后面直接读缓存就好。

#### 高并发
mysql 这么重的数据库，mysql 单机支撑到 `2000QPS` 也开始容易报警了。

高峰期一秒钟过来的请求有 1万，那一个 mysql 单机绝对会死掉。这个时候就只能上缓存，把很多数据放缓存。缓存功能简单，说白了就是 `key-value` 式操作，单机支撑的并发量轻松一秒几万十几万，支撑高并发。单机承载并发量是 mysql 单机的几十倍。缓存是走内存的，内存天然就支撑高并发。

### 用了缓存之后会不良后果
常见的缓存问题有以下几个：
- [缓存与数据库双写不一致](../high-concurrency/redis-consistence.md)
- [缓存雪崩、缓存穿透](../high-concurrency/redis-caching-avalanche-and-caching-penetration.md)
- [缓存并发竞争](../high-concurrency/redis-cas.md)

后面再详细说明。